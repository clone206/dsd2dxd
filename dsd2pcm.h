/*

Copyright 2009, 2011 Sebastian Gesemann. All rights reserved.

Redistribution and use in source and binary forms, with or without modification, are
permitted provided that the following conditions are met:

   1. Redistributions of source code must retain the above copyright notice, this list of
      conditions and the following disclaimer.

   2. Redistributions in binary form must reproduce the above copyright notice, this list
      of conditions and the following disclaimer in the documentation and/or other materials
      provided with the distribution.

THIS SOFTWARE IS PROVIDED BY SEBASTIAN GESEMANN ''AS IS'' AND ANY EXPRESS OR IMPLIED
WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL SEBASTIAN GESEMANN OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

The views and conclusions contained in the software and documentation are those of the
authors and should not be interpreted as representing official policies, either expressed
or implied, of Sebastian Gesemann.

 */

#ifndef DSD2PCM_H_INCLUDED
#define DSD2PCM_H_INCLUDED

#include <stddef.h>
#include <string.h>

#ifdef __cplusplus
extern "C"
{
#endif

#define FIFOSIZE 256            /* must be a power of two */
#define FIFOMASK (FIFOSIZE - 1) /* bit mask for FIFO offsets */

    /*
     * Properties of this 96-tap lowpass filter when applied on a signal
     * with sampling rate of 44100*64 Hz:
     *
     * () has a delay of 17 microseconds.
     *
     * () flat response up to 48 kHz
     *
     * () if you downsample afterwards by a factor of 8, the
     *    spectrum below 70 kHz is practically alias-free.
     *
     * () stopband rejection is about 160 dB
     *
     * The coefficient tables ("ctables") take only 6 Kibi Bytes and
     * should fit into a modern processor's fast cache.
     */

    /*
     * The 2nd half (48 coeffs) of a 96-tap symmetric lowpass filter
     */
    static const double htaps_d2p[48] = {
        0.09950731974056658,
        0.09562845727714668,
        0.08819647126516944,
        0.07782552527068175,
        0.06534876523171299,
        0.05172629311427257,
        0.0379429484910187,
        0.02490921351762261,
        0.0133774746265897,
        0.003883043418804416,
        -0.003284703416210726,
        -0.008080250212687497,
        -0.01067241812471033,
        -0.01139427235000863,
        -0.0106813877974587,
        -0.009007905078766049,
        -0.006828859761015335,
        -0.004535184322001496,
        -0.002425035959059578,
        -0.0006922187080790708,
        0.0005700762133516592,
        0.001353838005269448,
        0.001713709169690937,
        0.001742046839472948,
        0.001545601648013235,
        0.001226696225277855,
        0.0008704322683580222,
        0.0005381636200535649,
        0.000266446345425276,
        7.002968738383528e-05,
        -5.279407053811266e-05,
        -0.0001140625650874684,
        -0.0001304796361231895,
        -0.0001189970287491285,
        -9.396247155265073e-05,
        -6.577634378272832e-05,
        -4.07492895872535e-05,
        -2.17407957554587e-05,
        -9.163058931391722e-06,
        -2.017460145032201e-06,
        1.249721855219005e-06,
        2.166655190537392e-06,
        1.930520892991082e-06,
        1.319400334374195e-06,
        7.410039764949091e-07,
        3.423230509967409e-07,
        1.244182214744588e-07,
        3.130441005359396e-08};

    static const double htaps_xld[56] = {
        +1.003599032761268994e-01,
        +9.662981560884242871e-02,
        +8.945349213182296477e-02,
        +7.937003090599190069e-02,
        +6.711999843322885573e-02,
        +5.357287880424892179e-02,
        +3.964424879125778151e-02,
        +2.621214413106798952e-02,
        +1.404181427224378970e-02,
        +3.726638223919860951e-03,
        -4.349367691769268421e-03,
        -1.002491923722929022e-02,
        -1.335121721731015974e-02,
        -1.456134879100988953e-02,
        -1.402473061802538001e-02,
        -1.219324909388730047e-02,
        -9.546051479083451571e-03,
        -6.539324989916536768e-03,
        -3.566042373069515121e-03,
        -9.288141542618654628e-04,
        +1.173027324018304039e-03,
        +2.642883925836397949e-03,
        +3.475194700261226202e-03,
        +3.735904314188005001e-03,
        +3.538838154561203993e-03,
        +3.021587525576849027e-03,
        +2.323915921681954030e-03,
        +1.570806204643151061e-03,
        +8.612537902079315079e-04,
        +2.629381379992477125e-04,
        -1.878960137078334030e-04,
        -4.825621199727765783e-04,
        -6.335370394217578393e-04,
        -6.670230543688062102e-04,
        -6.157309569032056416e-04,
        -5.128053356239906969e-04,
        -3.874181080355335862e-04,
        -2.621813014123864261e-04,
        -1.522269998707380064e-04,
        -6.560081853307215519e-05,
        -4.520812542841012188e-06,
        +3.294602930918357880e-05,
        +5.116792066565596268e-05,
        +5.546209091390614230e-05,
        +5.098758042924450833e-05,
        +4.205866389020815099e-05,
        +3.183958589294015248e-05,
        +2.233259319611928908e-05,
        +1.455336859409994022e-05,
        +8.794181965752857413e-06,
        +4.896565360135651024e-06,
        +2.483029535958191067e-06,
        +1.124189775289309014e-06,
        +4.387878673693896045e-07,
        +1.376777283954879050e-07,
        +2.904117154225673850e-08,
    };

    /*
     * The 2nd half (112 coeffs) of a 224-tap symmetric lowpass filter
     *  - flat response up to ~35 kHz
     *  - alias free below ~35 kHz
     *  - stopband rejection ~-160 dB
     */
    static const double htaps_16to1_xld[112] = {
        +5.760462813961340911e-02, +5.691757911729226210e-02, +5.555982934698910219e-02, +5.356356970757100017e-02, +5.097584071644974124e-02, +4.785708826560070711e-02, +4.427932021228758730e-02, +4.032393001491144102e-02, +3.607926497084759654e-02, +3.163802486407806674e-02, +2.709458166634984982e-02, +2.254231220535396138e-02, +1.807103341873207009e-02, +1.376462411228964074e-02, +9.698908328714049912e-03, +5.939863928921530062e-03,
        +2.542206329958864031e-03, -4.516178595725602886e-04, -3.012008656370503135e-03, -5.122359614640761838e-03, -6.778787301343743021e-03, -7.989471529052894969e-03, -8.773647602567644088e-03, -9.160302763993922320e-03, -9.186637450460090337e-03, -8.896357660427813702e-03, -8.337867548688329689e-03, -7.562431350066944717e-03, -6.622370993341054196e-03, -5.569360561977704585e-03, -4.452871427796344095e-03, -3.318812840644432948e-03,
        -2.208402475303640131e-03, -1.157290413781186019e-03, -1.949487751238639024e-04, +6.556718097281456770e-04, +1.378228000447144063e-03, +1.962830183962950819e-03, +2.405675727112777888e-03, +2.708501415055656822e-03, +2.877891852193870201e-03, +2.924483152906128154e-03, +2.862101978458481914e-03, +2.706878996383537978e-03, +2.476373319315937002e-03, +2.188740653069128940e-03, +1.861973022276113086e-03, +1.513232339191010987e-03,
        +1.158294059628507027e-03, +8.111110219952220434e-04, +4.835015649465252210e-04, +1.849604310259179106e-04, -7.741400027371707175e-05, -2.988867964233316867e-04, -4.769618051506617756e-04, -6.111814994833964041e-04, -7.028689690242875083e-04, -7.548301317186775859e-04, -7.710338230080065417e-04, -7.562862630242533132e-04, -7.159146274091129480e-04, -6.554722205113200752e-04, -5.804752203233431215e-04, -4.961782711053265614e-04,
        -4.073935045445318940e-04, -3.183550094944409157e-04, -2.326284177570372112e-04, -1.530632418997455091e-04, -8.178395736251813184e-05, -2.021457860897648995e-05, +3.086935161782307266e-05, +7.126786445358902723e-05, +1.012693221865872058e-04, +1.215551028696340054e-04, +1.331019332169323043e-04, +1.370868574255101988e-04, +1.347989395314041930e-04, +1.275608199228540093e-04, +1.166622847621144983e-04, +1.033070589774495030e-04,
        +8.857317092942181480e-05, +7.338651153573718159e-05, +5.850660458614138270e-05, +4.452313192296150120e-05, +3.186146077678470723e-05, +2.079524623147637055e-05, +1.146416398967912983e-05, +3.894913917889374591e-06, -1.976237783286506113e-06, -6.280878589462072164e-06, -9.197003076568571641e-06, -1.092962463456785992e-05, -1.169410169367897026e-05, -1.170252663016168039e-05, -1.115328413493569935e-05, -1.022369729486433082e-05,
        -9.065501913715266297e-06, -7.802825857677858607e-06, -6.532217683647328614e-06, -5.324223752151299107e-06, -4.226118520432855354e-06, -3.265375069810791995e-06, -2.453390583768283789e-06, -1.789251932048668056e-06, -1.263325393243766064e-06, -8.603805222502517747e-07, -5.622136294265281904e-07, -3.498174364819740902e-07, -2.048713691800104068e-07, -1.108150375211134017e-07, -5.349252062858066909e-08, -2.369569955628185962e-08};

    /*
     * The 2nd half (288 coeffs) of a 576-tap symmetric lowpass filter
     *  - flat response up to ~20 kHz
     *  - alias free below ~25 kHz
     *  - stopband rejection ~-160 dB
     */

    static const double htaps_32to1[288] = {
        +2.832187306764930024e-02, +2.824254652547155894e-02, +2.808432323267462047e-02, +2.784805981693616941e-02, +2.753503385413587010e-02, +2.714693509532617108e-02, +2.668585387745912862e-02, +2.615426680982179883e-02, +2.555501984939613849e-02, +2.489130889836478969e-02, +2.416665807665070026e-02, +2.338489584045802885e-02, +2.255012913312142916e-02, +2.166671577126854861e-02, +2.073923528018081081e-02, +1.977245840528879875e-02,
        +1.877131553484789883e-02, +1.774086427655622092e-02, +1.668625643570932973e-02, +1.561270464630398064e-02, +1.452544890578267960e-02, +1.342972326544866063e-02, +1.233072292235590922e-02, +1.123357195589693054e-02, +1.014329194292572060e-02, +9.064771677361208035e-03, +8.002738208179420443e-03, +6.961729398264351887e-03, +5.946068190188035993e-03, +4.959838752272686252e-03, +4.006864657703029797e-03, +3.090689234824688103e-03,
        +2.214558204810868070e-03, +1.381404705106524956e-03, +5.938367750600997974e-04, -1.458726389730360105e-04, -8.357931251922676164e-04, -1.474341678431721064e-03, -2.060285011500399832e-03, -2.592739330986297986e-03, -3.071167626252056804e-03, -3.495374536995716000e-03, -3.865498885199498968e-03, -4.182003972794667845e-03, -4.445665765159678359e-03, -4.657559092152077987e-03, -4.819042016204004228e-03, -4.931738524717999700e-03,
        -4.997519718506597715e-03, -5.018483673850830835e-03, -4.996934165225410361e-03, -4.935358439236965308e-03, -4.836404236456526978e-03, -4.702856256539406955e-03, -4.537612266426255953e-03, -4.343659045449917849e-03, -4.124048362213557709e-03, -3.881873170101666787e-03, -3.620244204366478060e-03, -3.342267154209461934e-03, -3.051020576317987898e-03, -2.749534703197336824e-03, -2.440771292077904830e-03, -2.127604643498118894e-03,
        -1.812803909572205949e-03, -1.499016794767284036e-03, -1.188754739724831068e-03, -8.843796622609676611e-04, -5.880923159878271786e-04, -3.019223094748012953e-04, -2.771981672196853147e-05, +2.328510093090354054e-04, +4.783169194379940079e-04, +7.073987641151111699e-04, +9.190130312632209530e-04, +1.112271769238554978e-03, +1.286480949839729007e-03, +1.441137339257558998e-03, +1.575923953338351094e-03, +1.690704186375274927e-03,
        +1.785514708046237074e-03, +1.860557233238480926e-03, +1.916189274480494973e-03, +1.952913992156397101e-03, +1.971369261884552831e-03, +1.972316081386773189e-03, +1.956626439645925940e-03, +1.925270773672532916e-03, +1.879305134991131072e-03, +1.819858188096574059e-03, +1.748118159472859074e-03, +1.665319851382668966e-03, +1.572731831126691080e-03, +1.471643899726622975e-03, +1.363354937798940932e-03, +1.249161220209139053e-03,
        +1.130345281896554107e-03, +1.008165410318069988e-03, +8.838458312909389363e-04, +7.585676448036903982e-04, +6.334605606403685175e-04, +5.095954720021247247e-04, +3.879778977304505945e-04, +2.695423141347214925e-04, +1.551473879545594930e-04, +4.557211363254804956e-05, -5.848714982121302336e-05, -1.564187572764166965e-04, -2.476969904107944958e-04, -3.318824351965740140e-04, -4.086215575078230183e-04, -4.776455182147663035e-04,
        -5.387682738310591891e-04, -5.918840138196919051e-04, -6.369639885152773850e-04, -6.740527876299678284e-04, -7.032641277165455583e-04, -7.247762138005570121e-04, -7.388267371729673530e-04, -7.457075750184377801e-04, -7.457592557458739410e-04, -7.393652541732076205e-04, -7.269461778585874657e-04, -7.089539070184127561e-04, -6.858657433614849096e-04, -6.581786260972080811e-04, -6.264034645490871179e-04, -5.910596374369238900e-04,
        -5.526697023529318804e-04, -5.117543562206921647e-04, -4.688276814919214910e-04, -4.243927112239643780e-04, -3.789373367108787231e-04, -3.329305828153049135e-04, -2.868192651371369154e-04, -2.410250435838356953e-04, -1.959418791533248873e-04, -1.519338979503454109e-04, -1.093336609274202063e-04, -6.844083620403528401e-05, -2.952126273990103065e-05, +7.193603354780373285e-06, +4.150687831536549813e-05, +7.325609188926600346e-05,
        +1.023127020047189011e-04, +1.285813056036018941e-04, +1.519985706393589032e-04, +1.725319145500247057e-04, +1.901779587762588038e-04, +2.049607845984900895e-04, +2.169300221144472075e-04, +2.261587990345685032e-04, +2.327415789478400943e-04, +2.367919175948391991e-04, +2.384401640618567114e-04, +2.378311335094294033e-04, +2.351217779434990897e-04, +2.304788767650866102e-04, +2.240767720798269929e-04, +2.160951675621174985e-04,
        +2.067170101029857016e-04, +1.961264721050950878e-04, +1.845070473953395931e-04, +1.720397749429781933e-04, +1.589016006967123988e-04, +1.452638850724962988e-04, +1.312910642536376893e-04, +1.171394686019740960e-04, +1.029563003773818032e-04, +8.887877351093520658e-05, +7.503341100148990623e-05, +6.153550051153143063e-05, +4.848870165261734227e-05, +3.598480003610095225e-05, +2.410360151822594151e-05, +1.291295855053903023e-05,
        +2.468918383889056018e-06, -7.184013145816823404e-06, -1.601250765005115149e-05, -2.399395521492089984e-05, -3.111592616541716165e-05, -3.737556186895185775e-05, -4.277890742838695083e-05, -4.734019621224070024e-05, -5.108109986524538059e-05, -5.402994956889200302e-05, -5.622094591580372044e-05, -5.769335894347278203e-05, -5.849073499133671775e-05, -5.866011315443717258e-05, -5.825126296545259699e-05, -5.731594732495138287e-05,
        -5.590722103130646285e-05, -5.407876383363619297e-05, -5.188426189785901754e-05, -4.937683048908486720e-05, -4.660849167063507129e-05, -4.362970031161859664e-05, -4.048892644400089720e-05, -3.723228964006149269e-05, -3.390325110490128029e-05, -3.054235478313806212e-05, -2.718702770133251922e-05, -2.387142394326060915e-05, -2.062632445904036968e-05, -1.747907760208205116e-05, -1.445358715398980996e-05, -1.157033727646837037e-05,
        -8.846458080574018455e-06, -6.295818680620189828e-06, -3.929157252171973044e-06, -1.754227570473739948e-06, +2.240237631741573941e-07, +2.003269670958403207e-06, +3.583595178404888061e-06, +4.967283563592720253e-06, +6.158591065304208374e-06, +7.163523781438434288e-06, +7.989605153551517631e-06, +8.645655922021059845e-06, +9.141567487947644549e-06, +9.488091562562559833e-06, +9.696631517220285660e-06, +9.779049329335696517e-06,
        +9.747480310794938088e-06, +9.614167244464591190e-06, +9.391299843338294523e-06, +9.090880843396395889e-06, +8.724594355736636002e-06, +8.303701327506392776e-06, +7.838941789073578681e-06, +7.340457950486000819e-06, +6.817728374480834957e-06, +6.279521753606318258e-06, +5.733855923492686614e-06, +5.187982122765973032e-06, +4.648366564206547802e-06, +4.120696806411627361e-06, +3.609887898458663985e-06, +3.120103103878763992e-06,
        +2.654779859917369158e-06, +2.216665275032597026e-06, +1.807850545720459064e-06, +1.429821746494539930e-06, +1.083498450311866066e-06, +7.692908715604939946e-07, +4.871471467434027954e-07, +2.366065597327929097e-07, +1.685298747544682079e-08, -1.732343427836944947e-07, -3.350338561481026136e-07, -4.701273358362828907e-07, -5.802636066524420439e-07, -6.673070867471868495e-07, -7.332020304139356636e-07, -7.799366405940304219e-07,
        -8.095047672834952274e-07, -8.238824329747376403e-07, -8.250008741034842748e-07, -8.147207590728109846e-07, -7.948230056574863639e-07, -7.669837851706851544e-07, -7.327663071654264482e-07, -6.936164634597962917e-07, -6.508435222985967835e-07, -6.056342016160503943e-07, -5.590400950831992114e-07, -5.119819580367899411e-07, -4.652602101145172060e-07, -4.195480307943062800e-07, -3.753998202582935077e-07, -3.332724301320836108e-07,
        -2.934992650879649092e-07, -2.563468124086172886e-07, -2.219805813833762934e-07, -1.904989412997169059e-07, -1.619409995434067118e-07, -1.362810288919094114e-07, -1.134353071512805988e-07, -9.332323773092096349e-08, -7.575343334062521977e-08, -6.062291042937457074e-08, -4.771030411192680066e-08, -3.683224038816808700e-08, -2.779864972391978905e-08, -2.040794120555675876e-08, -1.445169688628993990e-08, -1.699951695670444848e-08};

    /*
     * 2nd half of equiripple lowpass filter for use with dsd128
     */
    static const double htaps_ddr_16to1_eq[220] = {
        0.03967918172266,
        0.0394606164597,
        0.03902581868843,
        0.03837942228431,
        0.03752829947255,
        0.036481467901,
        0.0352499690058,
        0.03384671956463,
        0.03228633874548,
        0.03058495332859,
        0.02875998410372,
        0.02682991672145,
        0.02481406049698,
        0.02273229882183,
        0.02060483493458,
        0.01845193684009,
        0.016293685139,
        0.01414972743606,
        0.01203904284613,
        0.009979719913507,
        0.007988751001587,
        0.006081845901772,
        0.004273267064887,
        0.002575688479429,
        0.001000079812008,
        -0.0004443830063868,
        -0.001750380003705,
        -0.002912481898218,
        -0.003927157478668,
        -0.00479275420639,
        -0.005509453024096,
        -0.00607919874062,
        -0.006505607716083,
        -0.006793854893063,
        -0.00695054249374,
        -0.006983552931486,
        -0.006901888669334,
        -0.00671550189079,
        -0.006435116924717,
        -0.006072048391346,
        -0.005638018017095,
        -0.005144972992676,
        -0.004604908628424,
        -0.004029697894774,
        -0.003430930237102,
        -0.002819761821255,
        -0.002206779097369,
        -0.001601877278471,
        -0.001014155028084,
        -0.0004518263335977,
        7.784978080115e-05,
        0.0005686213739312,
        0.001015277527427,
        0.001413664393137,
        0.001760683927189,
        0.002054276154855,
        0.002293386054973,
        0.002477916356866,
        0.002608667726308,
        0.002687267966954,
        0.002716091975713,
        0.002698174256659,
        0.002637115845477,
        0.002536987511846,
        0.002402231063104,
        0.002237560510799,
        0.002047864801493,
        0.001838113671771,
        0.001613268044288,
        0.001378196274424,
        0.001137597307286,
        0.0008959317104508,
        0.0006573612756492,
        0.0004256977494775,
        0.0002043610247501,
        -3.653048274125e-06,
        -0.000195795264436,
        -0.0003699762791039,
        -0.000524570794415,
        -0.0006584132197243,
        -0.0007707854358403,
        -0.0008613973978704,
        -0.0009303613949664,
        -0.0009781608589803,
        -0.001005614652374,
        -0.001013837799369,
        -0.001004199613856,
        -0.0009782801861972,
        -0.0009378261403823,
        -0.000884706540111,
        -0.000820869752405,
        -0.0007483020092783,
        -0.0006689883310961,
        -0.0005848763738523,
        -0.0004978436746766,
        -0.0004096686745776,
        -0.0003220057926326,
        -0.0002363647295458,
        -0.0001540940857295,
        -7.636928654002e-05,
        -4.184726903121e-06,
        6.1650033003e-05,
        0.0001205102553268,
        0.0001719524864702,
        0.0002157078315901,
        0.0002516724235337,
        0.0002798954922116,
        0.0003005654541321,
        0.0003139944539199,
        0.0003206017887601,
        0.000320896633556,
        0.0003154604638123,
        0.0003049295522909,
        0.0002899778855706,
        0.0002713008064835,
        0.0002495996486132,
        0.000225567591644,
        0.00019987692126,
        0.0001731678312222,
        0.0001460388613902,
        0.0001190390273955,
        9.266165736204e-05,
        6.733991039178e-05,
        4.344391972319e-05,
        2.127947719273e-05,
        1.088149248552e-06,
        -1.695130914543e-05,
        -3.272039061816e-05,
        -4.615727858441e-05,
        -5.725246273313e-05,
        -6.604369781204e-05,
        -7.261047433301e-05,
        -7.70681623827e-05,
        -7.956198302521e-05,
        -8.026095471347e-05,
        -7.935194688015e-05,
        -7.703395586845e-05,
        -7.351270476482e-05,
        -6.899565390495e-05,
        -6.368748946344e-05,
        -5.778613863114e-05,
        -5.147934604603e-05,
        -4.494183136099e-05,
        -3.83330304094e-05,
        -3.179540829164e-05,
        -2.545332361495e-05,
        -1.941241288141e-05,
        -1.375945316718e-05,
        -8.562654083797e-06,
        -3.872327816564e-06,
        2.781171917912e-07,
        3.870917726378e-06,
        6.902491590107e-06,
        9.381822289858e-06,
        1.132874506586e-05,
        1.277218648283e-05,
        1.374840497125e-05,
        1.429927130747e-05,
        1.447062356022e-05,
        1.431072870375e-05,
        1.386887538931e-05,
        1.319411404488e-05,
        1.233415643422e-05,
        1.133444419204e-05,
        1.023738869134e-05,
        9.081778005126e-06,
        7.902344901689e-06,
        6.729488942691e-06,
        5.589140268567e-06,
        4.502748737573e-06,
        3.487383282925e-06,
        2.555927219135e-06,
        1.717351603692e-06,
        9.770481404248e-07,
        3.372061827957e-07,
        -2.027803495953e-07,
        -6.458906222316e-07,
        -9.97054039128e-07,
        -1.262737089815e-06,
        -1.450547837654e-06,
        -1.568866778101e-06,
        -1.626511987927e-06,
        -1.632441841297e-06,
        -1.595496349857e-06,
        -1.524179487416e-06,
        -1.426485084596e-06,
        -1.309762706114e-06,
        -1.18061990962e-06,
        -1.044860741083e-06,
        -9.074575386942e-07,
        -7.725500134175e-07,
        -6.434667011015e-07,
        -5.227674570433e-07,
        -4.123017132376e-07,
        -3.132780348736e-07,
        -2.263398986069e-07,
        -1.516459946938e-07,
        -8.895334695492e-08,
        -3.769764777537e-08,
        2.931841559903e-09,
        3.392069378243e-08,
        5.636475709727e-08,
        7.141409087706e-08,
        8.02256191387e-08,
        8.392411935038e-08,
        8.356892115526e-08,
        8.013197318099e-08,
        7.44818401009e-08,
        6.737456790105e-08,
        5.944849500251e-08,
        5.122635461145e-08,
        4.312103866884e-08,
        3.544320356457e-08,
        2.841069361226e-08,
        2.216105556684e-08,
        1.676469695895e-08,
        1.223667243522e-08,
        8.548204152084e-09,
        5.638813366603e-09,
        5.209252174493e-09};

    /*
     * 2nd half of cheb filter for dsd128 (352.8K)
     */
    static const double htaps_ddr_16to1_cheb[125] = {
        0.02835739393627,
        0.02825873973908,
        0.02806221943724,
        0.02776940032306,
        0.02738261122763,
        0.0269049163383,
        0.02634008085983,
        0.02569252899681,
        0.02496729483974,
        0.02416996683207,
        0.02330662658036,
        0.02238378284125,
        0.02140830157835,
        0.02038733302632,
        0.0193282367298,
        0.01823850553947,
        0.01712568954765,
        0.01599732093035,
        0.01486084063366,
        0.01372352779858,
        0.01259243276267,
        0.01147431440895,
        0.01037558255431,
        0.009302245982798,
        0.00825986663474,
        0.007253520362825,
        0.006287764562596,
        0.00536661287905,
        0.00449351708511,
        0.003671356123264,
        0.0029024322004,
        0.00218847372935,
        0.001530644820373,
        0.0009295609429791,
        0.0003853103044304,
        -0.0001025195733353,
        -0.0005348106507507,
        -0.0009128791573263,
        -0.001238437015755,
        -0.001513550571836,
        -0.001740597308067,
        -0.001922221217146,
        -0.002061287499518,
        -0.002160837227061,
        -0.002224042583852,
        -0.002254163255597,
        -0.002254504492765,
        -0.002228377319866,
        -0.002179061305794,
        -0.002109770248976,
        -0.002023621067408,
        -0.001923606118749,
        -0.001812569110654,
        -0.001693184697598,
        -0.001567941798577,
        -0.001439130611281,
        -0.001308833243442,
        -0.001178917831795,
        -0.001051035974082,
        -0.0009266232602688,
        -0.0008069026559365,
        -0.0006928904639298,
        -0.0005854045698347,
        -0.0004850746626959,
        -0.000392354114423,
        -0.0003075331992957,
        -0.0002307533385201,
        -0.0001620220634555,
        -0.000101228404426,
        -4.815842937598e-05,
        -2.510677430771e-06,
        3.608874396764e-05,
        6.807160388421e-05,
        9.391371288979e-05,
        0.0001141219582193,
        0.000129222330535,
        0.000139749035453,
        0.0001462347554748,
        0.0001492021016727,
        0.0001491562698199,
        0.0001465788929647,
        0.0001419230619959,
        0.0001356094677413,
        0.0001280236027183,
        0.0001195139478925,
        0.0001103910597076,
        0.0001009274651898,
        9.135826799957e-05,
        8.188236578208e-05,
        7.266417885161e-05,
        6.383579195687e-05,
        5.549941435609e-05,
        4.773006844966e-05,
        4.057842350827e-05,
        3.407369833581e-05,
        2.822656475884e-05,
        2.303199238772e-05,
        1.847198391064e-05,
        1.451815904139e-05,
        1.113415394551e-05,
        8.277811342328e-06,
        5.903144373237e-06,
        3.962064615001e-06,
        2.405871206331e-06,
        1.186503875243e-06,
        2.575676607326e-07,
        -4.248587053662e-07,
        -9.016154497247e-07,
        -1.210037604219e-06,
        -1.383694449525e-06,
        -1.452271913492e-06,
        -1.441576890508e-06,
        -1.373642634614e-06,
        -1.266915064318e-06,
        -1.136500918164e-06,
        -9.944601336834e-07,
        -8.501265065882e-07,
        -7.104425436343e-07,
        -5.802963784506e-07,
        -4.628506082892e-07,
        -3.59854872262e-07,
        -2.719358775956e-07,
        -1.98860347961e-07,
        -1.397679839937e-07,
        -1.636964250491e-07};

    /*
     * 2nd half of equiripple filter for dsd128 (176.4K)
     */
    static const double htaps_ddr_32to1_eq[250] = {
        0.02306390103769,
        0.02301925502527,
        0.02293013800439,
        0.02279689908003,
        0.0226200596575,
        0.0224003107564,
        0.02213850945376,
        0.02183567447948,
        0.02149298098988,
        0.02111175455211,
        0.02069346437599,
        0.02023971583383,
        0.01975224231313,
        0.01923289645306,
        0.01868364081532,
        0.01810653804746,
        0.01750374059533,
        0.01687748002658,
        0.01623005603088,
        0.01556382515638,
        0.01488118935303,
        0.01418458438813,
        0.01347646819971,
        0.01275930925488,
        0.01203557498142,
        0.01130772033437,
        0.01057817656345,
        0.009849340242658,
        0.009123562620904,
        0.008403139351197,
        0.007690300652044,
        0.006987201952117,
        0.006295915064475,
        0.005618419934464,
        0.004956596999307,
        0.004312220195745,
        0.003686950644143,
        0.003082331036802,
        0.002499780749671,
        0.001940591695296,
        0.001405924926886,
        0.0008968080013227,
        0.0004141331017886,
        -4.134408203409e-05,
        -0.0004690047247887,
        -0.0008683664989726,
        -0.001239082487973,
        -0.001580939399259,
        -0.001893855102501,
        -0.002177875521263,
        -0.002433170909972,
        -0.002660031551788,
        -0.002858862915168,
        -0.003030180310602,
        -0.003174603088232,
        -0.003292848423959,
        -0.003385724743905,
        -0.003454124819864,
        -0.003499018601051,
        -0.003521445843639,
        -0.003522508531813,
        -0.003503363201327,
        -0.003465213209806,
        -0.003409300936463,
        -0.003336900046487,
        -0.003249307797129,
        -0.003147837476401,
        -0.003033810988859,
        -0.002908551631048,
        -0.002773377111738,
        -0.00262959282615,
        -0.002478485450174,
        -0.002321316844335,
        -0.002159318333617,
        -0.001993685347504,
        -0.001825572480156,
        -0.001656088950845,
        -0.00148629451287,
        -0.001317195788309,
        -0.001149743066154,
        -0.0009848275401031,
        -0.0008232790132024,
        -0.000665864044057,
        -0.0005132845511121,
        -0.0003661768471893,
        -0.0002251111119353,
        -9.059127204397e-05,
        3.69447091162e-05,
        0.0001571241654645,
        0.000269638690076,
        0.0003742427598542,
        0.0004707520326958,
        0.0005590413532997,
        0.0006390424814784,
        0.0007107415798319,
        0.000774176475129,
        0.0008294337331663,
        0.0008766455620158,
        0.0009159865816889,
        0.0009476704782918,
        0.0009719465792461,
        0.0009890963643801,
        0.0009994299509158,
        0.001003282565198,
        0.00100101103503,
        0.0009929903164298,
        0.0009796100850862,
        0.0009612714037238,
        0.000938383492418,
        0.0009113606106384,
        0.0008806190744847,
        0.0008465744162772,
        0.0008096387037932,
        0.0007702180263467,
        0.0007287101578619,
        0.0006855024042392,
        0.0006409696389797,
        0.0005954725343509,
        0.0005493559860626,
        0.0005029477373036,
        0.0004565571948005,
        0.0004104744418399,
        0.0003649694387678,
        0.0003202914119569,
        0.0002766684213005,
        0.0002343070997236,
        0.000193392560911,
        0.0001540884593685,
        0.0001165372059672,
        8.086031221543e-05,
        4.71588691387e-05,
        1.551413772298e-05,
        -1.401175227756e-05,
        -4.137500632681e-05,
        -6.654929455233e-05,
        -8.952480342965e-05,
        -0.0001103072240421,
        -0.0001289167003946,
        -0.000145386732127,
        -0.0001597630505685,
        -0.0001721024788687,
        -0.0001824717834898,
        -0.0001909465254198,
        -0.0001976099233397,
        -0.0002025517329364,
        -0.0002058671529092,
        -0.0002076557617015,
        -0.0002080204940172,
        -0.0002070666592716,
        -0.0002049010103334,
        -0.0002016308628093,
        -0.0001973632726497,
        -0.0001922042700035,
        -0.000186258156514,
        -0.0001796268622772,
        -0.0001724093689286,
        -0.0001647011931852,
        -0.0001565939368717,
        -0.0001481748962867,
        -0.0001395267363215,
        -0.0001307272210392,
        -0.0001218490051788,
        -0.0001129594779154,
        -0.0001041206626537,
        -9.538916340682e-05,
        -8.681616099828e-05,
        -7.844744956252e-05,
        -7.032351606141e-05,
        -6.247965327971e-05,
        -5.494610803505e-05,
        -4.774825631661e-05,
        -4.090680657775e-05,
        -3.443802096723e-05,
        -2.835395954645e-05,
        -2.266273622217e-05,
        -1.736878700113e-05,
        -1.247314650257e-05,
        -7.973733205361e-06,
        -3.865630144822e-06,
        -1.41373631231e-07,
        3.208766311187e-06,
        6.196506624921e-06,
        8.835281820369e-06,
        1.113997994402e-05,
        1.31266918073e-05,
        1.481246757644e-05,
        1.621509229994e-05,
        1.735286778251e-05,
        1.824441627278e-05,
        1.890849138361e-05,
        1.936381224476e-05,
        1.962890631121e-05,
        1.972197401376e-05,
        1.966076280167e-05,
        1.946246234861e-05,
        1.914360932606e-05,
        1.872001233962e-05,
        1.820668447049e-05,
        1.76177954738e-05,
        1.696662986542e-05,
        1.626556406278e-05,
        1.552604679865e-05,
        1.475859737571e-05,
        1.397280460626e-05,
        1.317734368314e-05,
        1.237998961703e-05,
        1.158764908817e-05,
        1.080638495296e-05,
        1.004145942658e-05,
        9.297366880961e-06,
        8.577883750964e-06,
        7.886107398791e-06,
        7.224511214568e-06,
        6.594984126404e-06,
        5.998888667564e-06,
        5.437100726938e-06,
        4.910066677095e-06,
        4.417841466804e-06,
        3.960144591091e-06,
        3.536393351154e-06,
        3.145756387419e-06,
        2.787181759836e-06,
        2.459446964092e-06,
        2.161180680227e-06,
        1.890909291891e-06,
        1.647071434391e-06,
        1.428061201399e-06,
        1.232234541596e-06,
        1.057950151392e-06,
        9.035674477507e-07,
        7.674859157047e-07,
        6.481339254117e-07,
        5.440081511273e-07,
        4.536524456834e-07,
        3.756997136432e-07,
        3.08839172475e-07,
        2.518639114712e-07,
        2.036239666618e-07,
        1.630842674295e-07,
        1.292586573899e-07,
        1.012862282235e-07,
        7.833728082499e-08,
        5.972226002345e-08,
        4.475031614888e-08,
        3.290164750661e-08,
        2.359195060153e-08,
        1.649501026942e-08,
        1.107278830569e-08,
        7.562915977443e-09,
        4.895537333617e-09};

    /*
     * 2nd half of chebyshev filter for dsd128 (176.4K)
     */
    static const double htaps_ddr_32to1_cheb[300] = {
        0.01594192201867,
        0.01592627808978,
        0.01589502284355,
        0.01584822141106,
        0.01578597125926,
        0.01570840191618,
        0.01561567460608,
        0.01550798179566,
        0.01538554665297,
        0.01524862242075,
        0.01509749170647,
        0.01493246569132,
        0.01475388326092,
        0.01456211006073,
        0.01435753747916,
        0.014140581562,
        0.01391168186173,
        0.01367130022554,
        0.01341991952616,
        0.01315804233964,
        0.01288618957463,
        0.01260489905751,
        0.01231472407815,
        0.01201623190103,
        0.01171000224661,
        0.01139662574786,
        0.01107670238703,
        0.01075083991753,
        0.01041965227617,
        0.01008375799071,
        0.009743778587713,
        0.009400337005837,
        0.009054056019368,
        0.008705556676974,
        0.008355456760392,
        0.008004369267764,
        0.007652900926157,
        0.007301650737673,
        0.00695120856343,
        0.006602153749486,
        0.006255053798611,
        0.005910463091641,
        0.005568921661896,
        0.005230954025962,
        0.004897068073895,
        0.004567754021673,
        0.004243483428461,
        0.003924708281033,
        0.003611860147402,
        0.003305349401473,
        0.003005564520246,
        0.002712871454855,
        0.002427613076414,
        0.002150108697424,
        0.00188065366917,
        0.00161951905531,
        0.001366951381566,
        0.001123172461174,
        0.0008883792954863,
        0.0006627440488786,
        0.0004464140968458,
        0.0002395121459571,
        4.213642409117e-05,
        -0.0001456390608381,
        -0.0003237641956722,
        -0.0004922123725191,
        -0.0006509800373812,
        -0.0008000861794714,
        -0.0009395717639578,
        -0.001069499111026,
        -0.001189951224292,
        -0.001301031071717,
        -0.001402860822293,
        -0.001495581041875,
        -0.001579349851584,
        -0.001654342052324,
        -0.00172074821897,
        -0.001778773767837,
        -0.001828638001071,
        -0.001870573131617,
        -0.001904823292388,
        -0.001931643533286,
        -0.001951298809655,
        -0.001964062965733,
        -0.001970217716594,
        -0.001970051632011,
        -0.001963859125591,
        -0.001951939452444,
        -0.001934595718532,
        -0.001912133904757,
        -0.001884861908695,
        -0.001853088606783,
        -0.001817122939603,
        -0.001777273022782,
        -0.001733845285853,
        -0.00168714364129,
        -0.001637468685741,
        -0.001585116935338,
        -0.00153038009678,
        -0.001473544375711,
        -0.001414889823749,
        -0.001354689725338,
        -0.001293210025417,
        -0.001230708798741,
        -0.001167435761473,
        -0.001103631825546,
        -0.001039528696087,
        -0.0009753485120214,
        -0.0009113035298466,
        -0.0008475958503729,
        -0.0007844171880816,
        -0.0007219486826088,
        -0.0006603607517103,
        -0.0005998129849298,
        -0.0005404540770605,
        -0.0004824218003655,
        -0.0004258430144089,
        -0.0003708337122384,
        -0.0003174991015599,
        -0.0002659337194557,
        -0.0002162215791092,
        -0.0001684363469288,
        -0.0001226415483926,
        -7.889080088274e-05,
        -3.722807172393e-05,
        2.312040395049e-06,
        3.970400247314e-05,
        7.493102459954e-05,
        0.0001079847196003,
        0.0001388647468286,
        0.0001675784419967,
        0.0001941404349392,
        0.0002185722571797,
        0.0002409019411494,
        0.0002611636128768,
        0.0002793970799267,
        0.0002956474163288,
        0.0003099645461807,
        0.0003224028275613,
        0.0003330206383255,
        0.0003418799652911,
        0.0003490459982575,
        0.0003545867302248,
        0.0003585725651057,
        0.0003610759341448,
        0.0003621709221785,
        0.000361932904786,
        0.0003604381972968,
        0.0003577637165369,
        0.0003539866561052,
        0.0003491841758908,
        0.0003434331064496,
        0.0003368096687769,
        0.0003293892099252,
        0.0003212459548331,
        0.0003124527746498,
        0.0003030809717564,
        0.0002932000816101,
        0.0002828776914588,
        0.0002721792759021,
        0.0002611680492026,
        0.0002499048341873,
        0.0002384479475099,
        0.0002268531009903,
        0.0002151733186876,
        0.0002034588693089,
        0.0001917572135115,
        0.0001801129656071,
        0.0001685678691372,
        0.0001571607857525,
        0.0001459276967947,
        0.0001349017169532,
        0.0001241131193405,
        0.0001135893713133,
        0.0001033551803477,
        9.343254926361e-05,
        8.384084008671e-05,
        7.45968458279e-05,
        6.571486946129e-05,
        5.720680938134e-05,
        4.90822506258e-05,
        4.13485611587e-05,
        3.401099251848e-05,
        2.707278415052e-05,
        2.053527075917e-05,
        1.439799203336e-05,
        8.6588041208e-06,
        3.313992248572e-06,
        -1.64161608728e-06,
        -6.214537914111e-06,
        -1.041252208032e-05,
        -1.424443755253e-05,
        -1.77201631766e-05,
        -2.085047933597e-05,
        -2.36469619093e-05,
        -2.612187889759e-05,
        -2.828809005874e-05,
        -3.015894985525e-05,
        -3.174821398864e-05,
        -3.306994976207e-05,
        -3.413845048137e-05,
        -3.496815407332e-05,
        -3.557356606988e-05,
        -3.596918707744e-05,
        -3.616944482134e-05,
        -3.618863082845e-05,
        -3.604084178396e-05,
        -3.573992557284e-05,
        -3.529943199295e-05,
        -3.473256810321e-05,
        -3.405215814944e-05,
        -3.327060799017e-05,
        -3.239987392624e-05,
        -3.145143582099e-05,
        -3.043627438238e-05,
        -2.936485246407e-05,
        -2.824710023037e-05,
        -2.709240401861e-05,
        -2.590959872307e-05,
        -2.470696351661e-05,
        -2.349222071932e-05,
        -2.22725376184e-05,
        -2.105453103947e-05,
        -1.984427446701e-05,
        -1.864730750997e-05,
        -1.746864750898e-05,
        -1.631280308173e-05,
        -1.518378940589e-05,
        -1.408514504133e-05,
        -1.301995009771e-05,
        -1.199084555792e-05,
        -1.100005357372e-05,
        -1.004939855599e-05,
        -9.140328888841e-06,
        -8.273939104349e-06,
        -7.450992362555e-06,
        -6.671943089662e-06,
        -5.936959636014e-06,
        -5.245946824399e-06,
        -4.598568268281e-06,
        -3.994268348887e-06,
        -3.432293749358e-06,
        -2.911714453566e-06,
        -2.431444126467e-06,
        -1.990259802134e-06,
        -1.586820814619e-06,
        -1.219686915757e-06,
        -8.873355326099e-07,
        -5.881781256959e-07,
        -3.205756171981e-07,
        -8.285286610602e-08,
        1.266878253647e-07,
        3.097541827282e-07,
        4.680524096204e-07,
        6.03276613503e-07,
        7.170991968209e-07,
        8.111621984464e-07,
        8.870695653973e-07,
        9.463803304128e-07,
        9.906026670213e-07,
        1.021188790234e-06,
        1.039530667938e-06,
        1.046956505426e-06,
        1.044727963321e-06,
        1.034038067324e-06,
        1.016009766848e-06,
        9.916950985514e-07,
        9.620749101619e-07,
        9.280590996183e-07,
        8.904873246042e-07,
        8.501301378279e-07,
        8.076905039941e-07,
        7.638056552525e-07,
        7.190492429803e-07,
        6.73933745038e-07,
        6.289130891119e-07,
        5.843854543884e-07,
        5.406962155862e-07,
        4.981409952695e-07,
        4.56968792362e-07,
        4.173851568568e-07,
        3.795553828515e-07,
        3.436076942064e-07,
        3.096363993201e-07,
        2.777049937097e-07,
        2.478491912679e-07,
        2.20079867224e-07,
        1.943858979521e-07,
        1.707368848284e-07,
        1.490857513374e-07,
        1.293712045464e-07,
        1.115200539027e-07,
        9.544938205533e-08,
        8.106856404708e-08,
        6.82811327656e-08,
        5.69864899785e-08,
        4.70814636002e-08,
        3.846171305026e-08,
        3.102298565994e-08,
        8.323725220211e-08};

    /*
     * 2nd half of chebyshev filter for dsd128 (88.2K)
     */
    static const double htaps_ddr_64to1_cheb[700] = {
        0.0106287233555,
        0.01062449004198,
        0.0106160267099,
        0.01060333994591,
        0.01058643962177,
        0.01056533888453,
        0.01054005414348,
        0.01051060505378,
        0.01047701449693,
        0.01043930855803,
        0.01039751649984,
        0.0103516707337,
        0.01030180678737,
        0.01024796326977,
        0.01019018183269,
        0.0101285071295,
        0.01006298677092,
        0.009993671277951,
        0.009920614031867,
        0.009843871221528,
        0.00976350178791,
        0.009679567366005,
        0.009592132224124,
        0.009501263200683,
        0.009407029638541,
        0.009309503316964,
        0.009208758381298,
        0.009104871270417,
        0.008997920642054,
        0.008887987296072,
        0.008775154095778,
        0.008659505887372,
        0.008541129417607,
        0.008420113249766,
        0.008296547678051,
        0.008170524640471,
        0.008042137630335,
        0.007911481606446,
        0.007778652902097,
        0.007643749132978,
        0.007506869104077,
        0.007368112715704,
        0.007227580868729,
        0.00708537536913,
        0.006941598831982,
        0.006796354584968,
        0.006649746571532,
        0.006501879253772,
        0.006352857515198,
        0.006202786563424,
        0.006051771832946,
        0.005899918888076,
        0.005747333326148,
        0.005594120681111,
        0.005440386327593,
        0.005286235385556,
        0.005131772625631,
        0.004977102375243,
        0.004822328425615,
        0.004667553939761,
        0.00451288136155,
        0.004358412325947,
        0.004204247570521,
        0.004050486848304,
        0.003897228842104,
        0.003744571080338,
        0.003592609854497,
        0.003441440138298,
        0.003291155508624,
        0.003141848068319,
        0.002993608370916,
        0.002846525347369,
        0.002700686234864,
        0.002556176507772,
        0.002413079810808,
        0.00227147789446,
        0.002131450552742,
        0.001993075563338,
        0.001856428630172,
        0.001721583328471,
        0.001588611052352,
        0.00145758096499,
        0.001328559951394,
        0.001201612573836,
        0.001076801029964,
        0.0009541851136302,
        0.0008338221784532,
        0.0007157671041494,
        0.0006000722656442,
        0.0004867875049841,
        0.0003759601060596,
        0.0002676347721514,
        0.0001618536063039,
        5.865609453025e-05,
        -4.192090815188e-05,
        -0.0001398431888583,
        -0.0002350791851559,
        -0.0003275999905714,
        -0.0004173793573045,
        -0.0005043936961613,
        -0.0005886220737303,
        -0.0006700462068216,
        -0.0007486504541971,
        -0.0008244218056206,
        -0.00089734986826,
        -0.0009674268504764,
        -0.001034647543039,
        -0.001099009297805,
        -0.001160512003911,
        -0.001219158061517,
        -0.001274952353159,
        -0.001327902212753,
        -0.00137801739231,
        -0.00142531002642,
        -0.001469794594552,
        -0.001511487881243,
        -0.001550408934235,
        -0.001586579020618,
        -0.00162002158105,
        -0.00165076218213,
        -0.001678828466974,
        -0.001704250104088,
        -0.001727058734595,
        -0.001747287917892,
        -0.001764973075827,
        -0.001780151435445,
        -0.001792861970416,
        -0.001803145341188,
        -0.001811043833973,
        -0.00181660129863,
        -0.001819863085531,
        -0.001820875981489,
        -0.001819688144842,
        -0.001816349039749,
        -0.001810909369815,
        -0.001803421011093,
        -0.001793936944573,
        -0.001782511188228,
        -0.001769198728691,
        -0.001754055452671,
        -0.001737138078157,
        -0.001718504085517,
        -0.001698211648563,
        -0.001676319565652,
        -0.001652887190922,
        -0.001627974365724,
        -0.001601641350334,
        -0.001573948756025,
        -0.00154495747756,
        -0.001514728626199,
        -0.00148332346327,
        -0.001450803334402,
        -0.001417229604459,
        -0.001382663593263,
        -0.001347166512175,
        -0.001310799401576,
        -0.001273623069335,
        -0.001235698030315,
        -0.001197084446966,
        -0.001157842071084,
        -0.001118030186772,
        -0.001077707554659,
        -0.001036932357445,
        -0.0009957621467881,
        -0.0009542537916164,
        -0.0009124634278801,
        -0.0008704464098029,
        -0.0008282572626646,
        -0.0007859496371551,
        -0.0007435762653337,
        -0.0007011889182267,
        -0.0006588383650935,
        -0.0006165743343887,
        -0.0005744454764464,
        -0.0005324993279087,
        -0.000490782277919,
        -0.0004493395360996,
        -0.0004082151023273,
        -0.0003674517383218,
        -0.0003270909410565,
        -0.0002871729180016,
        -0.0002477365642041,
        -0.0002088194412094,
        -0.0001704577578251,
        -0.0001326863527268,
        -9.553867890192e-05,
        -5.904678992602e-05,
        -2.324132806455e-05,
        1.184848581083e-05,
        4.619486050313e-05,
        7.977144098235e-05,
        0.0001125533131057,
        0.0001445170065841,
        0.0001756404962155,
        0.0002059032014067,
        0.0002352859840089,
        0.0002637711444925,
        0.0002913424164883,
        0.0003179849597258,
        0.0003436853513994,
        0.0003684315759947,
        0.00039221301361,
        0.0004150204268084,
        0.0004368459460379,
        0.0004576830536578,
        0.0004775265666114,
        0.0004963726177864,
        0.0005142186361037,
        0.0005310633253804,
        0.0005469066420086,
        0.0005617497714962,
        0.0005755951039169,
        0.0005884462083137,
        0.0006003078061056,
        0.0006111857435444,
        0.0006210869632706,
        0.000630019475018,
        0.0006379923255156,
        0.0006450155676379,
        0.000651100228853,
        0.000656258279019,
        0.0006605025975799,
        0.0006638469402108,
        0.0006663059049633,
        0.0006678948979622,
        0.0006686300987024,
        0.0006685284249987,
        0.000667607497635,
        0.0006658856047663,
        0.0006633816661193,
        0.0006601151970427,
        0.0006561062724538,
        0.0006513754907304,
        0.0006459439375939,
        0.0006398331500306,
        0.000633065080296,
        0.0006256620600478,
        0.0006176467646515,
        0.0006090421776998,
        0.000599871555791,
        0.0005901583936046,
        0.0005799263893159,
        0.000569199410388,
        0.0005580014597795,
        0.0005463566426041,
        0.000534289133278,
        0.0005218231431897,
        0.0005089828889251,
        0.0004957925610799,
        0.0004822762936898,
        0.0004684581343079,
        0.0004543620147572,
        0.0004400117225853,
        0.0004254308732451,
        0.0004106428830271,
        0.0003956709427654,
        0.0003805379923366,
        0.0003652666959745,
        0.0003498794184158,
        0.0003343982018951,
        0.0003188447440046,
        0.0003032403764322,
        0.0002876060445899,
        0.0002719622881451,
        0.0002563292224626,
        0.0002407265209676,
        0.0002251733984348,
        0.0002096885952104,
        0.0001942903623706,
        0.0001789964478191,
        0.0001638240833262,
        0.0001487899725082,
        0.0001339102797471,
        0.0001192006200473,
        0.0001046760498269,
        9.035105863675e-05,
        7.623956180358e-05,
        6.235489398774e-05,
        4.870980364861e-05,
        3.531644840759e-05,
        2.21863912982e-05,
        9.330597891737e-06,
        -3.240565714304e-06,
        -1.551733405842e-05,
        -2.749054264266e-05,
        -3.915162744085e-05,
        -5.049262360394e-05,
        -6.150616337951e-05,
        -7.21854732634e-05,
        -8.252437040221e-05,
        -9.251725826603e-05,
        -0.0001021591216114,
        -0.0001114455207556,
        -0.0001203725851826,
        -0.0001289370065041,
        -0.0001371360307964,
        -0.0001449674503367,
        -0.0001524295947625,
        -0.0001595213216771,
        -0.0001662420067248,
        -0.0001725915331617,
        -0.0001785702809445,
        -0.0001841791153646,
        -0.0001894193752496,
        -0.0001942928607601,
        -0.000198801820805,
        -0.0002029489401017,
        -0.0002067373259061,
        -0.0002101704944376,
        -0.0002132523570248,
        -0.0002159872059971,
        -0.0002183797003461,
        -0.0002204348511839,
        -0.0002221580070207,
        -0.0002235548388881,
        -0.0002246313253308,
        -0.0002253937372926,
        -0.0002258486229179,
        -0.0002260027922944,
        -0.0002258633021584,
        -0.0002254374405863,
        -0.0002247327116933,
        -0.0002237568203625,
        -0.000222517657024,
        -0.000221023282506,
        -0.000219281912978,
        -0.0002173019050044,
        -0.0002150917407299,
        -0.0002126600132133,
        -0.0002100154119285,
        -0.0002071667084506,
        -0.0002041227423421,
        -0.0002008924072578,
        -0.0001974846372814,
        -0.0001939083935103,
        -0.0001901726509022,
        -0.0001862863853965,
        -0.0001822585613244,
        -0.0001780981191186,
        -0.0001738139633346,
        -0.0001694149509949,
        -0.0001649098802645,
        -0.0001603074794686,
        -0.0001556163964608,
        -0.0001508451883484,
        -0.0001460023115846,
        -0.0001410961124306,
        -0.0001361348177975,
        -0.0001311265264694,
        -0.0001260792007146,
        -0.0001210006582878,
        -0.0001158985648265,
        -0.0001107804266441,
        -0.0001056535839212,
        -0.0001005252042972,
        -9.540227686149e-05,
        -9.029160654552e-05,
        -8.519980891364e-05,
        -8.013330535272e-05,
        -7.509831865803e-05,
        -7.010086901313e-05,
        -6.514677036095e-05,
        -6.024162716245e-05,
        -5.539083153896e-05,
        -5.059956079372e-05,
        -4.587277530763e-05,
        -4.121521680388e-05,
        -3.663140697542e-05,
        -3.212564646923e-05,
        -2.77020142205e-05,
        -2.336436712971e-05,
        -1.911634007519e-05,
        -1.496134625329e-05,
        -1.090257783813e-05,
        -6.943006952392e-06,
        -3.085386940471e-06,
        6.67746064993e-07,
        4.314071292485e-06,
        7.851481206363e-06,
        1.127807911666e-05,
        1.459217653383e-05,
        1.779229027851e-05,
        2.087713935645e-05,
        2.384564160903e-05,
        2.669691014973e-05,
        2.943024959717e-05,
        3.204515211528e-05,
        3.454129327136e-05,
        3.691852772263e-05,
        3.917688474212e-05,
        4.131656359458e-05,
        4.333792877318e-05,
        4.524150510763e-05,
        4.702797275442e-05,
        4.869816207983e-05,
        5.025304844604e-05,
        5.169374691097e-05,
        5.302150685199e-05,
        5.423770652376e-05,
        5.534384756032e-05,
        5.634154943109e-05,
        5.723254386091e-05,
        5.801866922322e-05,
        5.870186491624e-05,
        5.928416573087e-05,
        5.976769621973e-05,
        6.015466507575e-05,
        6.044735952906e-05,
        6.064813977039e-05,
        6.075943340908e-05,
        6.078372997353e-05,
        6.072357546155e-05,
        6.058156694805e-05,
        6.036034725695e-05,
        6.006259970421e-05,
        5.969104291826e-05,
        5.924842574422e-05,
        5.873752223771e-05,
        5.816112675383e-05,
        5.752204913669e-05,
        5.682311001458e-05,
        5.606713620535e-05,
        5.525695623657e-05,
        5.439539598456e-05,
        5.348527443618e-05,
        5.252939957688e-05,
        5.153056440826e-05,
        5.04915430982e-05,
        4.941508726611e-05,
        4.830392240576e-05,
        4.716074444781e-05,
        4.598821646382e-05,
        4.478896551323e-05,
        4.356557963477e-05,
        4.232060498306e-05,
        4.105654311135e-05,
        3.977584840067e-05,
        3.848092563588e-05,
        3.71741277283e-05,
        3.58577535849e-05,
        3.453404612341e-05,
        3.320519043271e-05,
        3.187331207747e-05,
        3.054047554591e-05,
        2.920868283938e-05,
        2.787987220207e-05,
        2.655591698919e-05,
        2.523862467158e-05,
        2.392973597473e-05,
        2.263092414986e-05,
        2.134379437459e-05,
        2.006988328065e-05,
        1.881065860588e-05,
        1.756751896757e-05,
        1.634179375421e-05,
        1.51347431325e-05,
        1.394755816636e-05,
        1.278136104461e-05,
        1.16372054139e-05,
        1.051607681338e-05,
        9.418893207459e-06,
        8.346505613058e-06,
        7.299698817594e-06,
        6.279192183917e-06,
        5.285640538384e-06,
        4.319635138212e-06,
        3.381704714216e-06,
        2.472316585018e-06,
        1.591877838808e-06,
        7.407365787134e-07,
        -8.081677215024e-08,
        -8.725481098743e-07,
        -1.63427823712e-06,
        -2.365881402539e-06,
        -3.067283796116e-06,
        -3.738462004288e-06,
        -4.379441428613e-06,
        -4.99029467177e-06,
        -5.57113989458e-06,
        -6.122139147708e-06,
        -6.643496681637e-06,
        -7.135457238446e-06,
        -7.598304328849e-06,
        -8.032358497891e-06,
        -8.437975582601e-06,
        -8.81554496485e-06,
        -9.165487822542e-06,
        -9.48825538222e-06,
        -9.784327176034e-06,
        -1.005420930597e-05,
        -1.029843271809e-05,
        -1.051755148952e-05,
        -1.071214113069e-05,
        -1.088279690541e-05,
        -1.103013217102e-05,
        -1.115477674105e-05,
        -1.125737527241e-05,
        -1.133858567925e-05,
        -1.139907757545e-05,
        -1.143953074751e-05,
        -1.146063365962e-05,
        -1.146308199261e-05,
        -1.144757721809e-05,
        -1.141482520941e-05,
        -1.136553489066e-05,
        -1.130041692482e-05,
        -1.122018244226e-05,
        -1.112554181056e-05,
        -1.101720344644e-05,
        -1.089587267069e-05,
        -1.076225060669e-05,
        -1.061703312313e-05,
        -1.046090982141e-05,
        -1.029456306809e-05,
        -1.011866707272e-05,
        -9.933887011131e-06,
        -9.74087819448e-06,
        -9.540285283878e-06,
        -9.332741550681e-06,
        -9.118868182224e-06,
        -8.899273632804e-06,
        -8.674553019605e-06,
        -8.44528756319e-06,
        -8.212044072123e-06,
        -7.975374471204e-06,
        -7.735815372748e-06,
        -7.493887690262e-06,
        -7.250096293835e-06,
        -7.004929706476e-06,
        -6.758859840615e-06,
        -6.512341773891e-06,
        -6.265813563349e-06,
        -6.019696097089e-06,
        -5.774392982387e-06,
        -5.530290469278e-06,
        -5.28775740853e-06,
        -5.04714524294e-06,
        -4.808788030833e-06,
        -4.573002500619e-06,
        -4.34008813527e-06,
        -4.110327285509e-06,
        -3.883985310546e-06,
        -3.661310745125e-06,
        -3.442535491688e-06,
        -3.22787503641e-06,
        -3.017528687882e-06,
        -2.811679837205e-06,
        -2.610496238257e-06,
        -2.414130306901e-06,
        -2.222719437911e-06,
        -2.036386338373e-06,
        -1.855239376377e-06,
        -1.679372943769e-06,
        -1.508867831792e-06,
        -1.343791618429e-06,
        -1.184199066291e-06,
        -1.030132529926e-06,
        -8.816223713944e-07,
        -7.386873830517e-07,
        -6.013352164323e-07,
        -4.695628161995e-07,
        -3.43356858132e-07,
        -2.226941901473e-07,
        -1.075422753943e-07,
        2.140363527617e-09,
        1.064037001334e-07,
        2.053057602811e-07,
        2.989121799138e-07,
        3.872957651288e-07,
        4.705360553603e-07,
        5.487188904226e-07,
        6.219359821313e-07,
        6.902844911838e-07,
        7.538666099471e-07,
        8.127891517649e-07,
        8.671631473623e-07,
        9.171034488932e-07,
        9.62728342136e-07,
        1.004159167315e-06,
        1.041519948988e-06,
        1.074937035397e-06,
        1.104538747673e-06,
        1.13045503921e-06,
        1.152817165532e-06,
        1.171757364921e-06,
        1.187408550039e-06,
        1.199904010768e-06,
        1.209377128438e-06,
        1.21596110159e-06,
        1.219788683402e-06,
        1.220991930865e-06,
        1.219701965764e-06,
        1.216048747523e-06,
        1.210160857893e-06,
        1.202165297493e-06,
        1.192187294159e-06,
        1.180350123029e-06,
        1.166774938282e-06,
        1.151580616441e-06,
        1.134883611081e-06,
        1.116797818831e-06,
        1.097434456469e-06,
        1.076901948963e-06,
        1.055305828226e-06,
        1.032748642393e-06,
        1.009329875385e-06,
        9.851458765046e-07,
        9.602897998306e-07,
        9.34851553125e-07,
        9.089177559866e-07,
        8.825717069598e-07,
        8.558933593054e-07,
        8.289593051298e-07,
        8.018427675635e-07,
        7.746136006737e-07,
        7.473382967912e-07,
        7.200800009279e-07,
        6.928985319572e-07,
        6.658504102293e-07,
        6.389888912895e-07,
        6.123640053694e-07,
        5.860226023193e-07,
        5.600084016511e-07,
        5.343620473637e-07,
        5.091211672244e-07,
        4.843204361822e-07,
        4.599916435934e-07,
        4.361637639427e-07,
        4.128630307505e-07,
        3.901130133576e-07,
        3.679346962893e-07,
        3.463465609033e-07,
        3.253646690346e-07,
        3.050027483563e-07,
        2.852722791835e-07,
        2.66182582455e-07,
        2.477409086355e-07,
        2.299525272888e-07,
        2.128208170824e-07,
        1.963473559922e-07,
        1.805320114837e-07,
        1.65373030458e-07,
        1.508671287578e-07,
        1.370095800398e-07,
        1.237943038278e-07,
        1.112139525727e-07,
        9.925999755267e-08,
        8.792281345919e-08,
        7.719176152146e-08,
        6.705527103415e-08,
        5.750091916101e-08,
        4.851550889742e-08,
        4.008514508408e-08,
        3.219530837346e-08,
        2.483092705977e-08,
        1.797644669243e-08,
        1.161589740155e-08,
        5.732958873124e-09,
        3.110229197413e-10,
        -4.666746398807e-09,
        -9.217355142732e-09,
        -1.335792437697e-08,
        -1.710563759565e-08,
        -2.047769070097e-08,
        -2.349124454442e-08,
        -2.616338003087e-08,
        -2.85110557802e-08,
        -3.055106833409e-08,
        -3.230001489043e-08,
        -3.377425854125e-08,
        -3.498989598541e-08,
        -3.596272768171e-08,
        -3.670823040337e-08,
        -3.724153215045e-08,
        -3.757738937239e-08,
        -3.7730166449e-08,
        -3.771381737459e-08,
        -3.754186958665e-08,
        -3.722740987728e-08,
        -3.678307232314e-08,
        -3.62210281667e-08,
        -3.555297758004e-08,
        -3.479014323986e-08,
        -3.394326564125e-08,
        -3.302260007602e-08,
        -3.203791520045e-08,
        -3.099849311638e-08,
        -2.991313088882e-08,
        -2.879014342304e-08,
        -2.763736762377e-08,
        -2.646216775917e-08,
        -2.527144195251e-08,
        -2.407162972501e-08,
        -2.28687205137e-08,
        -2.166826308919e-08,
        -2.047537579915e-08,
        -1.929475756429e-08,
        -1.813069955527e-08,
        -1.698709747999e-08,
        -1.135903768078e-07};

    struct dsd2pcm_ctx_s
    {
        unsigned char fifo[FIFOSIZE];
        unsigned fifopos;
        unsigned int numTables;
        double **ctables;
        int decimation;
        int lsbfirst;
        int delay;
        int delay2;
        int (*translate)(struct dsd2pcm_ctx_s *, size_t, const unsigned char *, ptrdiff_t, float *, ptrdiff_t);
        int (*finalize)(struct dsd2pcm_ctx_s *, float *, ptrdiff_t);
    };

    typedef struct dsd2pcm_ctx_s dsd2pcm_ctx;

    /**
     * initializes a "dsd2pcm engine" for one channel
     * (precomputes tables and allocates memory)
     *
     * This is the only function that is not thread-safe in terms of the
     * POSIX thread-safety definition because it modifies global state
     * (lookup tables are computed during the first call)
     */
    extern dsd2pcm_ctx *dsd2pcm_init(char filtType, int lsbf, int decimation, int dsdRate);

    /**
     * deinitializes a "dsd2pcm engine"
     * (releases memory, don't forget!)
     */
    extern void dsd2pcm_destroy(dsd2pcm_ctx *ctx);

    /**
     * clones the context and returns a pointer to the
     * newly allocated copy
     */
    extern dsd2pcm_ctx *dsd2pcm_clone(dsd2pcm_ctx *ctx);

    /**
     * resets the internal state for a fresh new stream
     */
    extern void dsd2pcm_reset(dsd2pcm_ctx *ctx);

    /**
     * "translates" a stream of octets to a stream of floats
     * (8:1 decimation)
     * @param handle -- pointer to abstract context (buffers)
     * @param blockSize -- number of octets/samples to "translate"
     * @param dsdData -- pointer to first octet (input)
     * @param dsdStride -- src pointer increment
     * @param floatData -- pointer to first float (output)
     * @param floatStride -- dst pointer increment
     * @param decimation -- decimation ration (to 1)
     */
    extern void dsd2pcm_translate(
        dsd2pcm_ctx *handle, size_t blockSize,
        const unsigned char *dsdData, ptrdiff_t dsdStride,
        double *floatData, ptrdiff_t floatStride, int decimation);

#ifdef __cplusplus
} /* extern "C" */
#endif

#endif /* include guard DSD2PCM_H_INCLUDED */
